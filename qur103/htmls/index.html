<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>학생 조 편성기 & 연구 계획</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 기본 스타일 */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background-color: #111827;
            color: #e5e7eb;
            min-height: 100vh;
        }

        /* 탭 메뉴 스타일 */
        .tabs {
            display: flex;
            justify-content: center;
            width: 100%;
            max-width: 900px;
            margin-bottom: 20px;
            background-color: #1f2937;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .tab-button {
            flex: 1;
            padding: 15px;
            font-size: 18px;
            font-weight: bold;
            color: #9ca3af;
            background-color: #1f2937;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            text-align: center;
        }
        .tab-button.active {
            background-color: #3498db;
            color: #fff;
        }
        .tab-button:not(.active):hover {
            background-color: #2b3543;
            color: #e5e7eb;
        }

        /* 컨테이너 및 섹션 공통 스타일 */
        .content-section {
            background-color: #1f2937;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 900px;
            padding: 40px;
            margin-bottom: 30px;
        }

        /* 버튼 공통 스타일 */
        button {
            display: block;
            width: 100%;
            padding: 15px;
            margin-top: 15px;
            background-color: #3498db;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            text-align: center;
            text-decoration: none;
        }
        button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        /* 입력 필드 스타일 */
        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #4b5563;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 16px;
            background-color: #374151;
            color: #d1d5db;
            transition: border-color 0.3s;
        }
        input:focus, textarea:focus {
            border-color: #3498db;
            outline: none;
        }
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #9ca3af;
        }

        /* 결과 표시 스타일 */
        .result-container {
            margin-top: 30px;
            border-top: 2px solid #374151;
            padding-top: 20px;
        }
        .team-list {
            list-style: none;
            padding: 0;
        }
        .team-item {
            background-color: #374151;
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 8px;
            font-size: 1.1em;
            color: #e5e7eb;
        }
        
        /* 선호도 입력 UI 스타일 */
        .preference-group {
            margin-bottom: 1rem;
            padding: 1rem;
            border: 1px solid #374151;
            border-radius: 8px;
            background-color: #2b3543;
        }
        .preference-group h3 {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .preference-inputs {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .preference-inputs .preference-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .preference-inputs .preference-item label {
            margin-bottom: 0;
            flex-grow: 1;
        }
        .preference-inputs .preference-item input {
            width: 80px;
            text-align: center;
            margin-left: 10px;
        }
    </style>
</head>
<body>

<!-- 탭 메뉴 -->
<div class="tabs">
    <button class="tab-button active" onclick="showTab('research')">비매너 행위 예측 연구</button>
    <button class="tab-button" onclick="showTab('generator')">학생 조 편성기</button>
</div>

<!-- 비매너 행위 예측 연구 섹션 -->
<div class="content-section mx-auto" id="research-plan-view">
    <!-- 헤더 섹션 (로고 및 타이틀) -->
    <header class="text-center py-8">
        <h1 class="text-4xl sm:text-5xl font-extrabold text-blue-400 mb-2">게임 속 비매너 행위 예측 연구</h1>
        <p class="text-xl text-gray-400">외적 요소를 활용한 행동 패턴 분석 연구 계획서</p>
    </header>

    <!-- 연구 개요 섹션 -->
    <section class="bg-gray-800 p-6 sm:p-8 rounded-xl shadow-lg mb-8">
        <div class="flex items-center mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-400 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <h2 class="text-2xl font-bold text-gray-100">1. 연구 배경 및 필요성</h2>
        </div>
        <p class="text-gray-300 leading-relaxed">
            온라인 게임이 보편화되면서 플레이어 간의 <strong>비매너 행위</strong>는 게임의 재미를 저해하고 건강한 게임 생태계를 파괴하는 심각한 문제로 대두되었습니다. 현재 대부분의 게임사는 사후 신고 및 제재 시스템을 운영하지만, 이는 이미 발생한 문제를 해결하는 데 그치며 근본적인 예방에는 한계가 있습니다. 본 연구는 <strong>외적 요소</strong>와 <strong>비매너 행위</strong> 간의 <strong>상관관계</strong>를 분석하여, 잠재적인 비매너 행위자를 사전에 식별하고 예측하는 시스템 개발의 기초를 마련하고자 합니다.
        </p>
    </section>

    <!-- 연구 목표 및 가설 섹션 -->
    <section class="bg-gray-800 p-6 sm:p-8 rounded-xl shadow-lg mb-8">
        <div class="flex items-center mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-400 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 012 .988l-.893 2.572a2 2 0 01-1.258 1.489H11M14 10a2 2 0 11-4 0m4 0a2 2 0 10-4 0m-3 8a2 2 0 10-4 0m4 0a2 2 0 11-4 0m-2 5a2 2 0 11-4 0" />
            </svg>
            <h2 class="text-2xl font-bold text-gray-100">2. 연구 목표 및 가설</h2>
        </div>
        <p class="text-gray-300 leading-relaxed mb-4">
            본 연구의 궁극적인 목표는 게임 내 <strong>외적 요소</strong>와 플레이어의 <strong>비매너 행위</strong> 발생 확률 사이의 상관관계를 통계적으로 분석하고, 이를 기반으로 예측 모델의 개발 가능성을 탐색하는 것입니다.
        </p>
        <h3 class="text-xl font-semibold text-gray-100 mb-2">주요 가설:</h3>
        <ul class="list-disc list-inside space-y-2 text-gray-400">
            <li><strong>가설 1 (시각적 요소):</strong> 특정 캐릭터 스킨이나 과시적 성격이 강한 장비는 플레이어의 공격적이고 충동적인 행동과 유의미한 상관관계를 가질 것이다.</li>
            <li><strong>가설 2 (플레이 시간 및 패턴):</strong> 특정 시간대(예: 심야 시간)나 누적 플레이 시간이 많은 유저는 비매너 행위 빈도와 관련이 있을 것이다.</li>
            <li><strong>가설 3 (게임 내 성취):</strong> 랭크 티어가 낮은 플레이어일수록 팀워크를 무시하거나 고의적으로 패배를 유도하는 비매너 행위의 경향성이 높을 것이다. 반면, 상위 랭크의 플레이어는 팀 승리에 대한 압박감으로 인해 언어 폭력적인 비매너를 더 많이 보일 수 있다.</li>
        </ul>
    </section>

    <!-- 연구 내용 및 방법 섹션 -->
    <section class="bg-gray-800 p-6 sm:p-8 rounded-xl shadow-lg mb-8">
        <div class="flex items-center mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-400 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.835 5.864 9.387 5.765 8 6.253v13m4-13c1.165-.389 2.613-.29 4 .253v13m-4-13h-4m4 0h4m-9 1a.997.997 0 01-1 1H4a1 1 0 01-1-1v-1a1 1 0 011-1h2a1 1 0 011 1v1zm-2 5h-2a1 1 0 01-1-1v-1a1 1 0 011-1h2a1 1 0 011 1v1zm8-5h2a1 1 0 011 1v1a1 1 0 01-1 1h-2a1 1 0 01-1-1v-1zm-2 5a1 1 0 011-1h2a1 1 0 011 1v1a1 1 0 01-1 1h-2a1 1 0 01-1-1v-1zm6 0a1 1 0 011-1h2a1 1 0 011 1v1a1 1 0 01-1 1h-2a1 1 0 01-1-1v-1zm-2-5h2a1 1 0 011 1v1a1 1 0 01-1 1h-2a1 1 0 01-1-1v-1z" />
            </svg>
            <h2 class="text-2xl font-bold text-gray-100">3. 연구 내용 및 방법</h2>
        </div>
        <p class="text-gray-300 leading-relaxed mb-4">
            본 연구는 데이터 수집부터 분석, 모델링에 이르는 체계적인 과정을 통해 진행됩니다.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- 데이터 수집 카드 -->
            <div class="bg-gray-700 p-6 rounded-xl shadow-inner border border-gray-600">
                <h3 class="text-xl font-semibold text-gray-100 mb-2">데이터 수집</h3>
                <p class="text-gray-400 leading-relaxed mb-4">
                    익명화된 플레이어 프로필 데이터와 게임 내 행동 데이터를 수집합니다.
                </p>
                <ul class="list-disc list-inside space-y-1 text-gray-400">
                    <li><strong>플레이어 프로필:</strong> 랭크 티어, 레벨, 플레이 시간, 주력 캐릭터, 스킨 등</li>
                    <li><strong>행동 데이터:</strong> 신고 기록, 채팅 로그, AFK, 고의적 피딩 등</li>
                </ul>
            </div>
            <!-- 데이터 분석 및 모델링 카드 -->
            <div class="bg-gray-700 p-6 rounded-xl shadow-inner border border-gray-600">
                <h3 class="text-xl font-semibold text-gray-100 mb-2">분석 및 모델링</h3>
                <p class="text-gray-400 leading-relaxed mb-4">
                    수집된 데이터를 통계적으로 분석하고 머신러닝 모델을 구축합니다.
                </p>
                <ul class="list-disc list-inside space-y-1 text-gray-400">
                    <li><strong>분석 방법:</strong> 카이제곱 검정, 다중 로지스틱 회귀 분석 등</li>
                    <li><strong>모델 구축:</strong> 로지스틱 회귀, 랜덤 포레스트, 신경망 등</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- 기대 효과 및 활용 방안 섹션 -->
    <section class="bg-gray-800 p-6 sm:p-8 rounded-xl shadow-lg mb-8">
        <div class="flex items-center mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-400 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
            <h2 class="text-2xl font-bold text-gray-100">4. 기대 효과 및 활용 방안</h2>
        </div>
        <p class="text-gray-300 leading-relaxed mb-4">
            본 연구의 결과는 게임 커뮤니티의 건전성을 크게 향상시킬 것입니다.
        </p>
        <ul class="space-y-4 text-gray-300">
            <li class="flex items-start">
                <span class="text-blue-400 font-bold mr-2 text-2xl">✓</span>
                <div>
                    <h3 class="font-semibold text-gray-100">비매너 행위 사전 예방</h3>
                    <p class="text-sm text-gray-400">잠재적 비매너 행위자를 사전에 예측하여 매칭 시스템에서 분리하거나 경고 메시지를 보내는 등 예방적 조치를 취할 수 있습니다.</p>
                </div>
            </li>
            <li class="flex items-start">
                <span class="text-blue-400 font-bold mr-2 text-2xl">✓</span>
                <div>
                    <h3 class="font-semibold text-gray-100">효율적인 운영 시스템</h3>
                    <p class="text-sm text-gray-400">AI 기반의 자동화된 예측 시스템은 운영진의 수동적인 감시 업무를 줄여 운영 효율성을 극대화합니다.</p>
                </div>
            </li>
            <li class="flex items-start">
                <span class="text-blue-400 font-bold mr-2 text-2xl">✓</span>
                <div>
                    <h3 class="font-semibold text-gray-100">게임 디자인 개선</h3>
                    <p class="text-sm text-gray-400">어떤 요소가 플레이어의 공격성을 유발하는지 파악하여, 보다 긍정적인 행동을 유도하는 게임 디자인 방향을 제시할 수 있습니다.</p>
                </div>
            </li>
        </ul>
    </section>
</div>

<!-- 학생 조 편성기 섹션 -->
<div class="content-section mx-auto hidden" id="team-generator-view">
    <h1 class="text-4xl font-bold text-center mb-8 text-blue-400">👨‍👩‍👧‍👦 학생 조 편성기</h1>
    <div class="input-group mb-6">
        <label for="students" class="block mb-2 text-gray-300">학생 이름 (쉼표로 구분):</label>
        <input type="text" id="students" class="w-full" placeholder="예: Alice, Bob, Charlie">
    </div>

    <div class="input-group mb-6">
        <label for="group-size" class="block mb-2 text-gray-300">한 조의 인원수:</label>
        <input type="number" id="group-size" class="w-full" value="3" min="1">
    </div>
    
    <div id="preferences-container" class="mb-6">
        <!-- 선호도 입력 UI가 동적으로 추가될 위치 -->
    </div>

    <button id="generate-button" class="w-full">조 편성하기</button>

    <div class="result-container" id="result-container" style="display: none;">
        <h2 class="text-2xl font-semibold mb-4 text-gray-100">✅ 편성 결과</h2>
        <ul class="team-list" id="team-results"></ul>
    </div>
</div>

<script>
    /**
     * 탭을 전환하고 활성화된 탭을 표시합니다.
     * @param {string} tabName - 'research' 또는 'generator'
     */
    function showTab(tabName) {
        const researchView = document.getElementById('research-plan-view');
        const generatorView = document.getElementById('team-generator-view');
        const researchButton = document.querySelector('.tab-button:nth-child(1)');
        const generatorButton = document.querySelector('.tab-button:nth-child(2)');

        if (tabName === 'research') {
            researchView.classList.remove('hidden');
            generatorView.classList.add('hidden');
            researchButton.classList.add('active');
            generatorButton.classList.remove('active');
        } else {
            researchView.classList.add('hidden');
            generatorView.classList.remove('hidden');
            researchButton.classList.remove('active');
            generatorButton.classList.add('active');
        }
    }

    /**
     * 학생 이름 배열을 기반으로 선호도 입력 UI를 동적으로 생성합니다.
     */
    function renderPreferenceInputs(students) {
        const container = document.getElementById('preferences-container');
        container.innerHTML = '';
        
        students.forEach(student => {
            const groupDiv = document.createElement('div');
            groupDiv.className = 'preference-group';
            
            const label = document.createElement('h3');
            label.className = 'text-blue-300';
            label.textContent = `${student}의 선호도 (1-10):`;
            
            const inputsDiv = document.createElement('div');
            inputsDiv.className = 'preference-inputs';

            // 모든 학생을 옵션으로 추가 (자기 자신 제외)
            students.filter(s => s !== student).forEach(optionStudent => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'preference-item';
                
                const itemLabel = document.createElement('label');
                itemLabel.textContent = optionStudent;

                const input = document.createElement('input');
                input.type = 'number';
                input.min = '1';
                input.max = '10';
                input.value = '5'; // 기본값 설정 (중립)
                input.setAttribute('data-student', student);
                input.setAttribute('data-for-student', optionStudent);
                
                itemDiv.appendChild(itemLabel);
                itemDiv.appendChild(input);
                inputsDiv.appendChild(itemDiv);
            });
            
            groupDiv.appendChild(label);
            groupDiv.appendChild(inputsDiv);
            container.appendChild(groupDiv);
        });
    }

    /**
     * 선호도 점수를 고려하여 학생들을 조로 편성합니다.
     * @param {string[]} students - 학생 이름 배열
     * @param {number} groupSize - 한 조의 인원수
     * @param {Object} preferences - { 학생: { 다른학생: 점수 } } 형태의 객체
     */
    function createTeamsWithPreferences(students, groupSize, preferences) {
        let remainingStudents = [...students];
        const teams = [];
        
        // 무작위로 학생들을 섞습니다.
        remainingStudents.sort(() => Math.random() - 0.5);

        while (remainingStudents.length > 0) {
            const currentTeam = [];
            const firstMember = remainingStudents.shift();
            currentTeam.push(firstMember);

            while (currentTeam.length < groupSize && remainingStudents.length > 0) {
                let bestMatch = null;
                let highestScore = -1;
                
                // 남은 학생들 중 현재 조와 가장 높은 점수를 가진 학생을 찾습니다.
                remainingStudents.forEach(student => {
                    let compatibilityScore = 0;
                    
                    // 현재 조원들이 이 학생에게 준 점수 합산
                    currentTeam.forEach(member => {
                        compatibilityScore += preferences[member][student] || 0;
                    });

                    // 이 학생이 현재 조원들에게 준 점수 합산
                    compatibilityScore += preferences[student][currentTeam[0]] || 0;
                    
                    // 최고 점수 갱신
                    if (compatibilityScore > highestScore) {
                        highestScore = compatibilityScore;
                        bestMatch = student;
                    }
                });

                if (bestMatch && highestScore > 0) {
                    // 점수가 높은 학생을 조에 추가
                    currentTeam.push(bestMatch);
                    remainingStudents = remainingStudents.filter(s => s !== bestMatch);
                } else {
                    // 선호도가 0이거나 없는 경우, 무작위로 선택
                    const randomIndex = Math.floor(Math.random() * remainingStudents.length);
                    const randomMember = remainingStudents.splice(randomIndex, 1)[0];
                    currentTeam.push(randomMember);
                }
            }
            teams.push(currentTeam);
        }
        return teams;
    }

    // 학생 이름 입력 필드에 이벤트 리스너 추가
    document.getElementById('students').addEventListener('input', (e) => {
        const studentsInput = e.target.value;
        const students = studentsInput.split(',').map(s => s.trim()).filter(s => s);
        renderPreferenceInputs(students);
    });

    document.getElementById('generate-button').addEventListener('click', () => {
        const studentsInput = document.getElementById('students').value;
        const students = studentsInput.split(',').map(s => s.trim()).filter(s => s);
        
        const groupSize = parseInt(document.getElementById('group-size').value, 10);
        if (isNaN(groupSize) || groupSize <= 0) {
            // alert는 사용하지 않으므로, 사용자에게 메시지 표시
            console.error('유효한 조 인원수를 입력해주세요.');
            return;
        }

        const preferences = {};
        students.forEach(student => {
            preferences[student] = {};
        });

        document.querySelectorAll('.preference-inputs input').forEach(input => {
            const student = input.getAttribute('data-student');
            const forStudent = input.getAttribute('data-for-student');
            const score = parseInt(input.value, 10) || 0;
            if (score >= 1 && score <= 10) {
                 preferences[student][forStudent] = score;
            }
        });

        // 조 편성 함수 실행
        const teams = createTeamsWithPreferences(students, groupSize, preferences);

        // 결과 표시
        const teamResultsList = document.getElementById('team-results');
        teamResultsList.innerHTML = '';
        if (teams.length > 0) {
            teams.forEach((team, index) => {
                const teamItem = document.createElement('li');
                teamItem.className = 'team-item';
                teamItem.textContent = `Team ${index + 1}: ${team.join(', ')}`;
                teamResultsList.appendChild(teamItem);
            });
            document.getElementById('result-container').style.display = 'block';
        } else {
            teamResultsList.innerHTML = '<p class="text-gray-400">편성할 학생이 없습니다.</p>';
            document.getElementById('result-container').style.display = 'block';
        }
    });

    // 화면 로드 시 학생 입력란 초기화 및 UI 생성
    document.addEventListener('DOMContentLoaded', () => {
        const initialStudents = document.getElementById('students').value.split(',').map(s => s.trim()).filter(s => s);
        renderPreferenceInputs(initialStudents);
        showTab('research'); // 페이지 로드 시 기본으로 연구 계획서 탭을 보여줍니다.
    });
</script>

</body>
</html>
